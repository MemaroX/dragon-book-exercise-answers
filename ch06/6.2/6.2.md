# Exercises for Section 6.2

### 6.2.1

Translate the arithmetic expression `a+-(b+c)` into:

1. An abstract syntax tree
2. A sequence of quadruples
3. A sequence of triples
4. A sequence of indirect triples

#### Solution

1. Abstract syntax tree

    ![6 2 1](https://f.cloud.github.com/assets/340282/1062210/dae8e64c-1230-11e3-9518-a128ca9a4d45.gif)


2. Sequence of quadruples

    <table>
        <thead>
            <tr>
                <th></th>
                <th>op</th>
                <th>arg1</th>
                <th>arg2</th>
                <th>result</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>0</td>
                <td>+</td>
                <td>b</td>
                <td>c</td>
                <td>t1</td>
            </tr>
            <tr>
                <td>1</td>
                <td>minus</td>
                <td>t1</td>
                <td></td>
                <td>t2</td>
            </tr>
            <tr>
                <td>2</td>
                <td>+</td>
                <td>a</td>
                <td>t2</td>
                <td>t3</td>
            </tr>
        </tbody>
    </table>

3. Sequence of triples

    <table>
        <thead>
            <tr>
                <th></th>
                <th>op</th>
                <th>arg1</th>
                <th>arg2</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>0</td>
                <td>+</td>
                <td>b</td>
                <td>c</td>
            </tr>
            <tr>
                <td>1</td>
                <td>minus</td>
                <td>(0)</td>
                <td></td>
            </tr>
            <tr>
                <td>2</td>
                <td>+</td>
                <td>a</td>
                <td>(1)</td>
            </tr>
        </tbody>
    </table>

4. Sequence of indirect triples

    <table>
        <thead>
            <tr>
                <th></th>
                <th>op</th>
                <th>arg1</th>
                <th>arg2</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>0</td>
                <td>+</td>
                <td>b</td>
                <td>c</td>
            </tr>
            <tr>
                <td>1</td>
                <td>minus</td>
                <td>(0)</td>
                <td></td>
            </tr>
            <tr>
                <td>2</td>
                <td>+</td>
                <td>a</td>
                <td>(1)</td>
            </tr>
        </tbody>
    </table>
    
    <table>
        <thead>
            <tr>
                <th></th>
                <th>instruction</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>0</td>
                <td>(0)</td>
            </tr>
            <tr>
                <td>1</td>
                <td>(1)</td>
            </tr>
            <tr>
                <td>2</td>
                <td>(2)</td>
            </tr>
        </tbody>
    </table>

#### References

- [A more detailed explanation of indirect triples](http://jpkc.nwpu.edu.cn/jp2005/20/kcwz/wlkc/wlkc/05/5_3_2.htm)

### 6.2.2

Repeat Exercise 6.2.1 for the following assignment statements:

1. a = b[i] + c[j]
2. a[i] = b\*c - b\*d
3. x = f(y+1) + 2
4. x = \*p + &y

#### Solution

1. a = b[i] + c[j]

    - Quadruples
    
            0) =[]   b    i    t1
            1) =[]   c    j    t2
            2) +     t1   t2   t3
            3) =     t3        a  
    
    - Triples
    
            0) =[]   b    i
            1) =[]   c    j
            2) +     (0)  (1)
            3) =     a    (2)  
            
    - Indirect Triples
    
            0) =[]   b    i
            1) =[]   c    j
            2) +     (0)  (1)
            3) =     a    (2)  
            
            0) 
            1)
            2)
            3)
    
2. a[i] = b\*c - b\*d

    - Quadruples
    
            0) *    b    c    t1
            1) *    b    d    t2
            2) -    t1   t2   t3
            3) []=  a    i    t4
            4) =    t3        t4
            
    - Triples
    
            0) *    b    c
            1) *    b    d
            2) -    (0)  (1)
            3) []=  a    i
            4) =    (3)  (2)
            
    - Indirect Triples
     
            0) *    b    c
            1) *    b    d
            2) -    (0)  (1)
            3) []=  a    i
            4) =    (3)  (2)
            
            0)
            1)
            2)
            3)
            4)

3. x = f(y+1) + 2

    - Quadruples
    
            0) +        y    1    t1
            1) param    t1
            2) call     f    1    t2
            3) +        t2    2   t3
            4) =        t3        x

    - Triples

            0) +        y     1
            1) param    (0)
            2) call     f     1
            3) +        (2)   2
            4) =        x     (3)

    - Indirect Triples
    
            0) +        y     1
            1) param    (0)
            2) call     f     1
            3) +        (2)   2
            4) =        x     (3)
            
            0)
            1)
            2)
            3)
            4)

#### References

- [Value and assignment of array elements](http://www.mec.ac.in/resources/notes/notes/compiler/module5/intermediate.htm)

### 6.2.3 !

Explain how to transform a sequence of three-address code so that each defined variable has a unique variable name.